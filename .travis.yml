language: php

php:
  - 5.2
  - 5.3
  - 5.4

env:
 - WP_VERSION=3.4.1 WP_MULTISITE=0
 - WP_VERSION=3.4.1 WP_MULTISITE=1

before_script:
  - pear config-set auto_discover 1
  - pear channel-discover pear.phpunit.de
  - pecl install phpunit/test_helpers
  - echo "zend_extension=\"$(php -i | grep 'extension_dir' | sed -e 's/extension_dir => \//\//g' -e 's/ => .*$//g')/test_helpers.so\"" >> `php --ini | grep "Loaded Configuration" | sed -e "s|.*:\s*||"`
  - wget https://raw.github.com/johnpbloch/wordpress-plugin-tests/setup/setup.sh
  - sh setup.sh
  - cd ../tests

script: phpunit All
